<!DOCTYPE html>
<html>
<head>
  <title>CRT Screener</title>
</head>

<body>

<h2>CRT Screener</h2>

<select id="tf">
  <option value="daily">Daily</option>
  <option value="weekly">Weekly</option>
  <option value="monthly">Monthly</option>
</select>

<br><br>

<button onclick=<script>
function runScan() {
  const tf = document.getElementById("timeframe").value;

  // Change TradingView chart timeframe
  document.getElementById("tvChart").src =
    "https://www.tradingview.com/chart/?symbol=FX:XAUUSD&interval=" + tf;

  // (Optional) backend call
  fetch("https://crt-screener-backend-rnoo.vercel.app/scan?tf=" + tf)
    .then(res => res.json())
    .then(data => {
      document.getElementById("result").innerText =
        JSON.stringify(data, null, 2);
    });
}
</script>

<h3>Chart</h3>

<iframe
  id="tvChart"
  src="https://www.tradingview.com/chart/?symbol=FX:XAUUSD"
  width="100%"
  height="500"
  style="border:0;"
></iframe>

<pre id="result"></pre>

<script>
function scan() {
  const tf = document.getElementById("tf").value;

  fetch("https://crt-screener-backend-rnoo.vercel.app/scan?tf=" + tf)

    .then(response => response.json())
    .then(data => {
      document.getElementById("result").innerText =
        JSON.stringify(data, null, 2);
    })
    .catch(error => {
      document.getElementById("result").innerText = "Error connecting to backend";
    });
}
</script>

</body>
</html>
